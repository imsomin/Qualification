# 데이터 입출력 구현

## (3-1) 논리 데이터 저장소 확인

### 1. 데이터 모델(Data Model)
- 현실 세계의 정보를 인간과 컴퓨터가 이해할 수 있도록 추상화하여 표현한 모델
- 데이터 모델에 표시해야 할 요소에는 논리적 데이터 구조, 연산, 제약조건이 있음


### 1-1. 데이터 모델 절차
- 개념적 → 개체관계 다이어그램
- 논리적 → 정규화
- 물리적 → 반 정규화


### 2. 논리 데이터 모델링
- 업무의 모습을 모델링 표기법으로 형상화하여 사람이 이해하기 쉽게 표현하는 프로세스
- 개념 모델로부터 업무 영역의 업무 데이터 및 규칙을 구체적으로 표현한 모델
- 종류
  - 관계 데이터 모델
  - 계층 데이터 모델
  - 네트워크 데이터 모델


### 2-1. 관계 데이터 모델
- 데이터를 행과 열로 구성된 2차원 테이블 형태로 구성한 모델 by E.F.Codd
- 구성요소 ★
  - 릴레이션 : 행(Row)과 열(Column)로 구성된 테이블
  - 튜플(Tuple) : 릴레이션의 행에 해당되는 요소
  - 속성(Attribute) : 릴레이션의 열에 해당되는 요소
  - 카티널리티(Cardinality) : 튜플의 수
  - 차수(Degree) : 애트리뷰트의 수
  - 스키마(Schema) : 데이터베이스의 구조, 제약조건 등의 정보를 담고 있는 기본적인 구조
  - 인스턴스(Instance) : 정의된 스키미에 따라 생성된 테이블에 실제 저장된 데이터의 집합
- 데이터 간의 관계를 기본 키와 이를 참조하는 외래 키로 표현함
- 관계 대수 : 관계형 데이터베이스에서 원하는 정보와 그 정보를 어떻게 유도하는가를 기술하는 절차적 정형 언어
  - 일반 집합 연산자(→ 수학의 집합 개념을 릴레이션에 적용)
    |연산자|기호|표현|설명|
    |:--:|:--:|:--:|:--:|
    |합집합|∪|R∪S|합병 가능한 두 릴레이션 R과 S의 합집합|
    |교집합|∩|R∩S|릴레이션 R과 S에 속하는 모든 튜플로 결과 릴레이션 구성|
    |차집합|-|R-S|R에 존재하고 S에 미 존재하는 튜플로 결과 릴레이션 구성|
    |카디션 프로덕트|X|RXS|R과 S에 속한 모든 튜플을 연결해 만들어진 새로운 튜플로 릴레이션 구성|
  - 순수 관계 연산자(→ 특별히 개발한 관계 연산자)
    |연산자|기호|표현|설명|
    |:--:|:--:|:--:|:--:|
    |셀렉트|σ|σ조건(R)|릴레이션 R에서 조건을 만족하는 튜플 반환|
    |프로젝트|π|π속성리스트(R)|릴레이션 R에서 주어진 속성들의 값으로만 구성된 튜플 반환|
    |조인|▷◁|R▷◁S|공통 속성을 이용해 R과 S의 튜플들을 연결해 만들어진 튜플 반환|
    |디비전|÷|R÷S|릴레이션 S의 모든 튜플과 관련 있는 R의 튜플 반환|
- 관계 해석
  - 관계 해석이란 튜플 관계 해석과 도메인 관계 해석을 하는 비절차적 언어이다.
  - Predicate Calculus(프레디킷 해석)에 기반, 비절차적 언어(원하는 정보가 무엇이라는 것만 선언)임


### 2-2. 논리 데이터 모델링 속성
- (1)개체(Entity)
  - 개체는 사물 또는 사건으로 정의되며 개체라고도 한다.
  - 사각형 표시 by Peter Chen Model
  - 표 형식 표시 by Crow's Foot Model
- (2)속성(Attribute)
  - 속성은 개체가 가지고 있는 요소 또는 성질이다.
  - 타원형 표시 by Peter Chen Model
  - 표 내부에 표시 by Crow's Foot Model
  - 속성명은 단수형으로 명명함
  - 개체명을 사용하지 않음
  - 속성이 필수 사항인지 아닌지(Not Null or Null) 고려하여 작성
- (3)관계(Relationship)
  - 두 개체 간의 관계를 정의한다.
  - 마름모 표시 by Peter Chen Model
  - 1:1 vs 1:m vs n:m by Crow's Foot Model


### 2-3. 개체-관계(E-R) 모델
- E-R 모델은 현실 세계에 존재하는 데이터와 그들 간의 관계를 사람이 이해할 수 있는 형태로 명확하게 표현하기 위해서 가장 널리 사용되고 있는 모델이다.
- 논리 데이터 모델링에서는 모든 이해당사자와 의사소통의 보조 자료로 E-R모델을 활용한다.
- 요구사항으로부터 얻어낸 정보들을 개체, 속성, 관계로 기술한 모델이다.
- E-R 다이어그램 기호
  |구성|기호|
  |:--:|:--:|
  |개체|사각형|
  |관계|마름모|
  |속성|타원|
  |다중 값 속성|이중타원|
  |관계-속성 연결|선|


### 3. 정규화(Normalization)
- 정규화는 관계형 데이터 모델에서 데이터의 중복성을 제거하여 이상 현상을 방지하고, 데이터의 일관성과 정확성을 유지하기 위해 무손실 분해하는 과정이다.
- 이상현상: 데이터의 중복성으로 인해 릴레이션을 조작할 때 발생하는 비합리적 현상(삽입, 삭제, 갱신 이상)
- 정규화의 단계
  |단계|조건|
  |:--:|:--:|
  |1정규형(1NF)|원자값으로 구성|
  |2정규형(2NF)|부분 함수 종속 제거(완전 함수적 종속 관계)|
  |3정규형(3NF)|이행함수 종속 제거|
  |보이스-코드 정규형(BCNF)|결정자 후보 키가 아닌 함수 종속 제거|
  |4정규형(4NF)|다치(다중 값) 종속 제거|
  |5정규형(5NF)|조인 종속 제거| 


### 3-1. 제1 정규화
- 원자값으로 구성, 반복 속성/중복 제거가 필요하다.
- 테이블 내의 속성값은 원자값을 가지고 있어야 한다.
- 이메일 주소가 속성에 2개 이상 가지고 있는 경우 원자값이 아니기 때문에 속성 1개만 가지도록 저장해야 한다.


### 3-2. 제2 정규화
- 부분함수 중속 제거(완전 함수적 종속 관계), 주식별자 아닌 속성을 분리한다.
- <고객명, 서비스 이름>이 <서비스 이용 기간>에 영향을 주고, <서비스 이름>이 <서비스 가격>에 영향을 주는 관계를 부분함수 종속 관계라고 한다.
- 이때 부분 관계인 <서비스 이름, 서비스 가격> 관계를 별도의 테이블로 두면 부분 함수 종속 관계가 제거된다.


### 3-3. 제3 정규화
- 이행함수 종속 제거, 속성에 종속적인 속성을 분리한다.
- <책번호>가 <출판사>에 영향을 주고, <출판사>가 <홈페이지>에 영향을 주는 관계인 A->B이고, B->C이면서 A->C 관계가 같이 있는 경우를 이행함수 종속 관계라고 한다.
- <책번호>는 <홈페이지>에 직접 영향을 주는 관계가 아니므로 <책번호, 출판사> 테이블, <출판사, 홈페이지> 테이블로 분리하여 이행 함수 관계를 제거한다.


### 3-4. 보이스-코드 정규화
- 결정자 함수 종속, 모든 결정자가 후보 키이다.
- <학번, 과목명>이 <교수명>에 영향을 주고, <교수명>이 <과목명>에 영향을 주는 관계로서, <교수명>은 <과목명>에 영향을 주지만 한 테이블에 같이 존재하고 <교수명>은 키가 아닌 상황이므로 결정자인 <교수명>이 후보 키가 아니다.
- <교수명>은 <과목명>에 직접 영향을 주기 때문에 <교수명, 과목명> 테이블로 분리하여 교수명이 후보 키 역할을 하도록 하여 보이스-코드 정규화를 만족한다.


### 3-5. 제4 정규화
- 다치(다중 값) 종속 제거, 특정 속성값에 따라 선택적인 속성을 분리한다.
- <개발자>마다 <자격증> 값들이 여러 개 존재하고, 특정 <개발자>마다 <언어>값들이 여러 개 존재하는 경우가 다치 종속 관계이다.
- <개발자, 자격증>, <개발자, 언어> 테이블로 분리하여 관리하면 다치 종속 관계를 제거한다.


### 3-6. 제5 정규화
- 조인 종속을 제거한다.
- 4차 정규화 테이블에 대헤 조인 연산을 수행하면 4차 정규화 수행 전 데이터와 다르게 되는 문제인 조인 종속이 발생한다.
- 이에 모든 속성 관계인 <개발자, 자격증>, <개발자 언어>, 그리고 <자격증, 언어> 관계에 대한 테이블을 만들어 조인했을 때 정확히 원래의 데이터로 복원할 수 있게 한다.


### 4. 반 정규화(De-Normalization)
- 반 정규화는 정규화된 엔터티, 속성, 관계에 대해 성능 향상과 개발 운영의 단순화를 위해 중복, 통합, 분리 등을 수행하는 데이터 모델링의 기법이다.
- 비정규화, 역정규화
- 특징
  - 장점) 데이터 구조 성능 향상, 관리의 효율성 증가
  - 단점) 데이터의 일관성 및 정합성 저하, 유지를 위한 비용 별도 발생


### 4-1. 반 정규화 기법
- 테이블 병합 : 1:1관계, 1:M관계를 통합하여 조인 횟수를 줄여 성능 향상
- 테이블 분할 : 테이블을 수직 또 는 수평으로 분할(파티셔닝)
- 중복 테이블 추가
- 컬럼 중복화
- 중복관계 추가





